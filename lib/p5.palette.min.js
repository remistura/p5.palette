/*! p5.palette.js (0.1.0): a p5.js library to manage color palettes. Author: Gustavo Mandolesi, license: ISC, 2022-11-12 */
class Palette{constructor(t,s){this.P=t,this.colors=s||[],this.index=0,this.weighted=[],this.weights=[]}add(t){return this.colors.push(t),this}addAnalogousColors(){var s=this.getAnalogous(),e=[];for(let t=0;t<this.size();t++)e.push(s.get(2*t)),e.push(this.get(t)),e.push(s.get(2*t+1));this.colors=Array.from(e)}addComplementaryColors(){var s=this.getComplementary(),e=[];for(let t=0;t<this.size();t++)e.push(this.get(t)),e.push(s.get(t));this.colors=Array.from(e)}addSplitComplementaryColors(){var s=this.getSplitComplementary(),e=[];for(let t=0;t<this.size();t++)e.push(s.get(2*t)),e.push(this.get(t)),e.push(s.get(2*t+1));this.colors=Array.from(e)}addTriadicColors(){var s=this.getTriadic(),e=[];for(let t=0;t<this.size();t++)e.push(s.get(2*t)),e.push(this.get(t)),e.push(s.get(2*t+1));this.colors=Array.from(e)}clone(){return this.P.createPalette(this.colors)}current(){return this.colors[this.index]}darken(){this.P.push(),this.P.colorMode(HSB);var s=[];for(let t=0;t<this.size();t++){var e=this.get(t);s.push(this.P.color(this.P.hue(e),this.P.saturation(e),.9*this.P.brightness(e)))}this.colors=Array.from(s),this.P.pop()}draw(t){var{borderColor:s=0,borderWeight:e=1,drawBorder:o=!1,fontSize:r=12,height:i=50,offset:h=0,showCursor:l=!1,showIndex:a=!1,vertical:n=!1,width:c=50,x:t=0,y:p=0}=t||{};this.P.push(),this.P.noStroke();let P=t,u=p;var g=this.colors.length;for(let t=0;t<g;t++){var d,f,m=this.colors[t];o&&(this.P.noFill(),this.P.stroke(s),this.P.strokeWeight(e),this.P.rect(P,u,c,i)),this.P.noStroke(),this.P.fill(m),this.P.rect(P,u,c,i),a&&(this.P.colorMode(HSB),m=50<this.P.brightness(m)?0:255,this.P.fill(m),this.P.stroke(m),this.P.strokeWeight(1),this.P.textAlign(this.P.CENTER,this.P.CENTER),this.P.textSize(r),m=P+c/2,d=u+i/2,f=""+t,this.P.text(f,m,d),l)&&this.index===t&&(f=r<(f=textWidth(f))?f:r,this.P.noFill(),this.P.circle(m,d,1.5*f)),P+=n?0:c+h,u+=n?i+h:0}this.P.pop()}get(t){return t?this.colors[t]:this.colors[this.index]}getAnalogous(){const e=[];return this.colors.forEach(t=>{var[t,s]=this.#getAnalogous(t);e.push(t),e.push(s)}),new Palette(this.P,e)}getComplementary(){const s=[];return this.colors.forEach(t=>{s.push(this.#getComplementary(t))}),new Palette(this.P,s)}getSplitComplementary(){const e=[];return this.colors.forEach(t=>{var[t,s]=this.#getSplitComplementary(t);e.push(t),e.push(s)}),new Palette(this.P,e)}getTriadic(){const e=[];return this.colors.forEach(t=>{var[t,s]=this.#getTriadic(t);e.push(t),e.push(s)}),new Palette(this.P,e)}lighten(){this.P.push(),this.P.colorMode(HSB);var s=[];for(let t=0;t<this.size();t++){var e=this.get(t);s.push(this.P.color(this.P.hue(e),.9*this.P.saturation(e),1.1*this.P.brightness(e)))}this.colors=Array.from(s),this.P.pop()}log(t=!0){t?this.#logHorizontal():this.#logVertical()}next(){return++this.index===this.colors.length&&(this.index=0),this.colors[this.index]}previous(){return--this.index<0&&(this.index=this.colors.length-1),this.colors[this.index]}random(t){if(!(this.colors.length<1))return t=t||this.P.random,0===this.weights.length&&this.setWeights(new Array(this.colors.length).fill(1)),this.weighted[Math.floor(t()*this.weighted.length)]}reset(){this.index=0}reverse(){this.colors.reverse()}setWeights(t){this.weights=t,this.weighted=this.#weight(this.colors)}size(){return this.colors.length}shuffle(t){const s=t||this.P.random;this.colors=this.colors.sort(()=>s()-.5)}sortByBrightness(){this.colors=this.colors.sort((t,s)=>this.P.brightness(t)===this.P.brightness(s)?0:this.P.brightness(t)>this.P.brightness(s)?1:-1)}sortByLightness(){this.colors=this.colors.sort((t,s)=>this.P.lightness(t)===this.P.lightness(s)?0:this.P.lightness(t)>this.P.lightness(s)?1:-1)}sortBySaturation(){this.colors=this.colors.sort((t,s)=>this.P.saturation(t)===this.P.saturation(s)?0:this.P.saturation(t)>this.P.saturation(s)?1:-1)}toHexString(){return this.toString().replaceAll("#","")}toString(t){const s=t&&t.separator||"-",e=t&&t.format||"#rrggbb";let o="";return this.colors.forEach(t=>{o=(o+=t.toString(e))+s}),o=o.slice(0,-1)}#getAnalogous(t){this.P.push(),this.P.colorMode(HSB);var s=this.P.color((this.P.hue(t)+330)%360,this.P.saturation(t),this.P.brightness(t)),t=this.P.color((this.P.hue(t)+30)%360,this.P.saturation(t),this.P.brightness(t));return this.P.pop(),[s,t]}#getComplementary(t){this.P.push(),this.P.colorMode(HSB);t=this.P.color((this.P.hue(t)+180)%360,this.P.saturation(t),this.P.brightness(t));return this.P.pop(),t}#getSplitComplementary(t){this.P.push(),this.P.colorMode(HSB);var s=this.P.color((this.P.hue(t)+150)%360,this.P.saturation(t),this.P.brightness(t)),t=this.P.color((this.P.hue(t)+210)%360,this.P.saturation(t),this.P.brightness(t));return this.P.pop(),[s,t]}#getTetradic(t){}#getTriadic(t){this.P.push(),this.P.colorMode(HSB);var s=this.P.color((this.P.hue(t)+120)%360,this.P.saturation(t),this.P.brightness(t)),t=this.P.color((this.P.hue(t)+240)%360,this.P.saturation(t),this.P.brightness(t));return this.P.pop(),[s,t]}#logHorizontal(){let s="",e="";var o=[];for(let t=0;t<this.size();t++){s+="%c%s";var r=this.colors[t].toString("#rrggbb");o.push("color: "+r),o.push("■■■■■■■■■"),e+=` ${r} `}console.log(s,...o),console.log("%c%s","color:gray",e)}#logVertical(){this.colors.forEach(t=>{t=t.toString("#rrggbb");console.log("%c%s%c %s","background: #222; color: "+t,"■■■■■■■■■■■■■■■■■■■■","color:gray",""+t)})}#weight(t){return[].concat(...t.map((t,s)=>Array(Math.ceil(100*this.weights[s])).fill(t)))}}const COLORMIND_API_URL="http://colormind.io/api/",COLOURLOVERS_API_URL="http://www.colourlovers.com/api/palettes/top?format=json&numResults=1&resultOffset=",STORAGE_KEY="palettes";function invalidValue(t,s){throw new Error(`Invalid ${t} value: `+s)}p5.prototype.createGradientPalette=({amount:s=5,end:t=this.color(0),start:e=this.color(255)}={})=>{var o=[],r=e,i=t;let h=0;for(let t=0;t<s-1;t++)o.push(this.lerpColor(r,i,h)),h+=1/s;return o.push(i),this.createPalette(o)},p5.prototype.createGrayscalePalette=({amount:t=5,end:s=255,start:e=0}={})=>{(t<2||255<t)&&invalidValue("amount",t);e=this.color(e),s=this.color(s);return this.createGradientPalette({amount:t,end:s,start:e})},p5.prototype.createPalette=t=>{let s=[];return Array.isArray(t)?s=t:("string"==typeof t||t instanceof String)&&t.split("-").forEach(t=>{s.push(this.color("#"+t))}),new Palette(this,s)},p5.prototype.createRandomPalette=(t,s)=>{var e=t||5,o=s||this.random,r=[];for(let t=0;t<e;t++)r.push(this.color(255*o(),255*o(),255*o()));return createPalette(r)},p5.prototype.loadColormindPalette=function(s,t){const e=new XMLHttpRequest,o=t=>{t=JSON.parse(t.response);if(t.result){const s=this.createPalette();return t.result.forEach(t=>{s.add(this.color(t))}),s}return null};let r=!1;if("function"==typeof s&&(r=!0,e.onreadystatechange=function(){var t;4===e.readyState&&200===e.status&&(t=o(e))&&s(t)}),e.open("POST",COLORMIND_API_URL,r),e.send(JSON.stringify({model:"default"})),4===e.readyState&&200===e.status){var i=o(e);if(i)return"function"==typeof this._decrementPreload&&this._decrementPreload(),i}},p5.prototype.registerPreloadMethod("loadColormindPalette",p5.prototype),p5.prototype.loadColourLoversPalette=t=>{const e=createPalette();return createPaletteFromColourLoversJsonp(COLOURLOVERS_API_URL+this.random(50)).then(s=>{for(let t=0;t<s.size();t++)e.add(s.get(t));"function"==typeof t&&t(s),"function"==typeof self._decrementPreload&&self._decrementPreload()}),e},p5.prototype.registerPreloadMethod("loadColourLoversPalette",p5.prototype),p5.prototype.clearStoredPalettes=()=>{this.removeItem(STORAGE_KEY)},p5.prototype.exportStoredPalettes=()=>{let s="const hexPalettes = [";loadStoredHexStrings().forEach(t=>{s+=`'${t}',`}),s=s.slice(0,-1),s+="];",this.saveStrings([s],"palettes-exported","js")},p5.prototype.loadStoredPalettes=()=>{var t=loadStoredHexStrings();if(t){const s=[];return t.forEach(t=>{s.push(this.createPalette(t))}),s}return null},p5.prototype.storePalette=s=>{if(s&&!(s.size()<1)){s=s.toHexString();let t=loadStoredHexStrings();(t=t||[]).push(s),this.storeItem(STORAGE_KEY,JSON.stringify(t))}};const createPaletteFromColourLoversJsonp=s=>new Promise(function(e,t){httpDo(s,"jsonp",{jsonpCallback:"jsonCallback"}).then(t=>{const s=new Palette(this);console.log(t),t[0].colors.forEach(t=>{s.add(this.color("#"+t))}),e(s)})}),loadStoredHexStrings=()=>{var t=getItem(STORAGE_KEY);return t?JSON.parse(t):null};